Actor JHSwitchingModes : Inventory
{
	Inventory.MaxAmount 1
	Inventory.RestrictedTo "AssaultPlayer"
}

Actor JHAmmo : Ammo
{
	Inventory.MaxAmount 40
	Inventory.Icon "SHELA0"
	Ammo.BackpackAmount 4
	Ammo.BackpackMaxAmount 80
	Inventory.RestrictedTo "AssaultPlayer"
	+IGNORESKILL
}
Actor JHMag : Ammo
{
	Inventory.MaxAmount 8
	+IGNORESKILL
}

Actor Jackhammer : Weapon
{
	Obituary "%o was hammered by %k's Jackhammer."
	Inventory.PickupMessage "You got the Jackhammer automatic shotgun. You SHOULD be getting this from a box."
	Weapon.SlotNumber 4
	Weapon.Kickback 100
	Weapon.AmmoType "JHAmmo"
	Weapon.AmmoUse 0
	Weapon.AmmoGive 4
	Weapon.AmmoType2 "JHMag"
	Weapon.AmmoGive 0
	Weapon.AmmoUse 0
	Inventory.RestrictedTo "AssaultPlayer"
	Tag "Jackhammer"
	Decal "BulletChip"
	+AMMO_CHECKBOTH
	
	states
	{
	Ready:
		ASGG A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		loop
	Select:
		ASGG A 0 A_Raise
		TNT1 A 0 A_JumpIfInventory("JHSwitchingModes", 1, "SelectMode")
		
		ASGR S 1 Offset(-40, 33)
		ASGR S 1 Offset(-20, 33)
		ASGR T 1 Offset(-16, 33)
		ASGR T 1 Offset(-6, 33)
		ASGG A 1 Offset(-2, 33)
		ASGG A 1
		Goto Ready
	SelectMode:
		ASGG A 2 Offset(0, 35)
		ASGR A 2
		ASGR B 2
		ASGR C 2
		ASGR D 2
		ASGR E 2
		ASGR F 2
		ASGR G 2 A_PlaySound("Weapons/ASR1", 1)
		ASGR H 2
		ASGR I 2
		ASGR J 6
		ASGR J 2 Offset(-1, 0)
		ASGR J 2 Offset(-8, 0)
		ASGR J 2 Offset(-24, 0)
		ASGR K 2 Offset(4, 0)
		ASGR K 2 Offset(1, 0)
		ASGR L 2 A_PlaySound("Weapons/ASR2", 1)
		ASGR N 2 A_PlaySound("Weapons/ASR3", 1)
		ASGR P 2 
		ASGR P 2 Offset(-6, 0)
		ASGR P 2 Offset(-2, 0)
		ASGR P 6 Offset(1, 0)
		ASGR Q 2
		ASGR R 2
		ASGR S 2
		ASGR T 2 A_TakeInventory("JHSwitchingModes", 1)
		Goto Ready
	Deselect:
		TNT1 A 0 A_JumpIfInventory("JHSwitchingModes", 1, "DeselectMode")
		TNT1 A 0 A_JumpIfHealthLower(1, "DeselectDeath")
		
		ASGG A 1
		ASGG A 1 Offset(-2, 0)
		ASGR T 1
		ASGR T 1 Offset(-12, 0)
		ASGR S 1
		ASGR S 1 Offset(-40, 0)
		ASGR S 1 Offset(-80, 0)
		ASGR S 1 Offset(-100, 0)
		TNT1 A 0 A_Lower
		Wait
	DeselectDeath:
		ASGG A 1 A_Lower
		Stop
	DeselectMode:
		ASGG A 0 A_Lower
		wait
	Fire:
		TNT1 A 0 A_JumpIfInventory("JHMag", 1, 1)
		Goto Reload
		
		TNT1 A 0 A_PlaySound("Weapons/ASFIR")
		ASGF A 1 A_FireBullets(10, 5, 7, 9, "BulletPuff")
		TNT1 A 0 A_TakeInventory("JHMag", 1)
		ASGF B 1
		ASGF C 1
		ASGG A 8
		TNT1 A 0 A_ReFire
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("JackhammerSweeper", 1, 1)
		Goto Ready
		
		TNT1 A 0 A_GiveInventory("JHSwitchingModes", 1)
		TNT1 A 0 A_SelectWeapon("JackhammerSweeper")
		Goto Reset
	Reload:
		TNT1 A 0 A_JumpIfInventory("JHMag", 0, "Ready")
		TNT1 A 0 A_JumpIfInventory("JHAmmo", 1, 1)
		Goto Ready
		
		ASGG A 2
		ASGR A 2
		ASGR B 2
		ASGR C 2
		ASGR D 2
		ASGR E 2
		ASGR F 2
		ASGR G 2 A_PlaySound("Weapons/ASR1", 1)
		ASGR H 2
		ASGR I 2
		ASGR J 6
		ASGR J 2 Offset(-1, 0)
		ASGR J 2 Offset(-8, 0)
		ASGR J 2 Offset(-24, 0)
		ASGR K 2 Offset(4, 0)
		ASGR K 2 Offset(1, 0)
		ASGR L 2 A_PlaySound("Weapons/ASR2", 1)
		ASGR N 2 A_PlaySound("Weapons/ASR3", 1)
		ASGR P 2 
		ASGR P 2 Offset(-6, 0)
		ASGR P 2 Offset(-2, 0)
		ASGR P 6 Offset(1, 0)
		ASGR Q 2
		ASGR R 2
		ASGR S 2
		ASGR T 2
		Goto ReloadLoop
	ReloadLoop:
		TNT1 A 0 A_JumpIfInventory("JHMag", 0, "Ready")
	
		TNT1 A 0 A_JumpIfInventory("JHAmmo", 1, 1)
		Goto Ready
	
		TNT1 A 0 A_GiveInventory("JHMag", 1)
		TNT1 A 0 A_TakeInventory("JHAmmo", 1)
		Loop
	Reset:
		TNT1 A 0
		Goto Ready
	}
}

Actor JHSAmmo : Ammo
{
	Inventory.MaxAmount 30
	Inventory.Icon "SHELA0"
	Ammo.BackpackAmount 4
	Ammo.BackpackMaxAmount 60
	Inventory.RestrictedTo "AssaultPlayer"
	+IGNORESKILL
}
Actor JHSMag : Ammo
{
	Inventory.MaxAmount 8
	+IGNORESKILL
}

Actor JackhammerSweeper : Jackhammer
{
	Obituary "%o was swept away by %k's Jackhammer Sweeper rounds."
	Inventory.PickupMessage "You got the Jackhammer automatic shotgun. You SHOULD be getting this from a box."
	Weapon.SlotNumber ""
	Weapon.Kickback 100
	Weapon.AmmoType "JHSAmmo"
	Weapon.AmmoUse 0
	Weapon.AmmoGive 0
	Weapon.AmmoType2 "JHSMag"
	Weapon.AmmoGive 0
	Weapon.AmmoUse 0
	Inventory.RestrictedTo "AssaultPlayer"
	Tag "Jackhammer"
	Decal "BulletChip"
	+AMMO_CHECKBOTH
	states
	{
	Fire:
		TNT1 A 0 A_JumpIfInventory("JHSMag", 1, 1)
		Goto Reload
		
		TNT1 A 0 A_PlaySound("Weapons/ASFIR")
		ASGF A 1 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		ASGF A 0 A_FireCustomMissile("JHSFlachettes", frandom(-5, 5), 0, -4)
		TNT1 A 0 A_TakeInventory("JHSMag", 1)
		ASGF B 1
		ASGF C 1
		ASGG A 8
		TNT1 A 0 A_ReFire
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("JackhammerSweeper", 1, 1)
		Goto Ready
		
		TNT1 A 0 A_GiveInventory("JHSwitchingModes", 1)
		TNT1 A 0 A_SelectWeapon("Jackhammer")
		Goto Reset
	Reload:
		TNT1 A 0 A_JumpIfInventory("JHSMag", 0, "Ready")
		TNT1 A 0 A_JumpIfInventory("JHSAmmo", 1, 1)
		Goto Ready
		
		ASGG A 2
		ASGR A 2
		ASGR B 2
		ASGR C 2
		ASGR D 2
		ASGR E 2
		ASGR F 2
		ASGR G 2 A_PlaySound("Weapons/ASR1", 1)
		ASGR H 2
		ASGR I 2
		ASGR J 6
		ASGR J 2 Offset(-1, 0)
		ASGR J 2 Offset(-8, 0)
		ASGR J 2 Offset(-24, 0)
		ASGR K 2 Offset(4, 0)
		ASGR K 2 Offset(1, 0)
		ASGR L 2 A_PlaySound("Weapons/ASR2", 1)
		ASGR N 2 A_PlaySound("Weapons/ASR3", 1)
		ASGR P 2 
		ASGR P 2 Offset(-6, 0)
		ASGR P 2 Offset(-2, 0)
		ASGR P 6 Offset(1, 0)
		ASGR Q 2
		ASGR R 2
		ASGR S 2
		ASGR T 2
		Goto ReloadLoop
	ReloadLoop:
		TNT1 A 0 A_JumpIfInventory("JHSMag", 0, "Ready")
	
		TNT1 A 0 A_JumpIfInventory("JHSAmmo", 1, 1)
		Goto Ready
	
		TNT1 A 0 A_GiveInventory("JHSMag", 1)
		TNT1 A 0 A_TakeInventory("JHSAmmo", 1)
		Loop
	}
}

Actor JHSFlachettes
{
	Damage 2
    Radius 2
    Height 2
    Speed 100
    Projectile 
    Obituary "%o was shredded by %k's Jackhammer Sweeper rounds."
    Renderstyle "Normal"
    Species "Player"
	BounceType "Doom"
    Scale 0.5
	Decal "BulletChip"
	Gravity 0.25
    +FORCERADIUSDMG
	+BLOODSPLATTER
    +THRUSPECIES
	+RIPPER
	-NOGRAVITY
	states
	{
	Spawn:
		FLAC A 1 bright
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("BulletPuff")
		Stop
	}
}